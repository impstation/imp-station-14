- type: entity
  abstract: true
  id: MobCosmicGodBase
  name: The Unknown
  description: Your mind begins to fracture and break as it fails to comprehend what looms before you.
  components:
  - type: Sprite
    noRot: true
    sprite: _Impstation/CosmicCult/Mobs/cosmicgod.rsi
    drawdepth: Ghosts
    scale: 2.1,2.1
    layers:
    - state: god
      shader: unshaded
  - type: PointLight
    radius: 25
    energy: 35
    castShadows: false
    color: "#43286a"

# spawn animation, spawns actual god when it ends
- type: entity
  parent: MobCosmicGodBase
  id: MobCosmicGodSpawn
  suffix: Spawn
  components:
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/_Impstation/CosmicCult/god_summon.ogg
  - type: Sprite
    layers:
    - state: spawn
      shader: unshaded
  # the spawn animation is exactly 4.62 seconds long, so we time our entity spawn-in to be the same.
  - type: TimedDespawn
    lifetime: 4.62
  - type: SpawnOnDespawn
    prototype: MobCosmicGod

- type: entity
  parent: [MobCosmicGodBase, BaseMob]
  id: MobCosmicGod
  components:
  - type: AnnounceOnSpawn
    message: cosmicgod-has-risen
    sender: cosmicgod-has-risen-sender
    color: "#cae8e8"
  - type: CargoSellBlacklist
  # big mob needs to see everything
  - type: ContentEye
    maxZoom: 2.2,2.2
  - type: Fixtures
    fixtures:
      EventHorizonCollider:
        shape:
          !type:PhysShapeCircle
            radius: 5
        hard: false
        restitution: 0.8
        density: 1
        mask:
        - Opaque
        layer:
        - GlassLayer
      EventHorizonConsumer:
        shape:
          !type:PhysShapeCircle
            radius: 6
        hard: false
        mask:
        - Opaque
        layer:
        - GlassLayer
  - type: Input
    context: "ghost"
  - type: MovementIgnoreGravity
  - type: GhostHearing
    globalReceive: true
  - type: Physics
    bodyType: Dynamic
    bodyStatus: InAir
  - type: CanMoveInAir
  - type: WarpPoint
    follow: true
    location: The Unknown
  - type: CosmicTest
    corruptionCooldown: 0.1
  - type: AmbientSound
    enabled: true
    volume: 0
    range: 25
    variation: 0.1
    sound:
      path: /Audio/_Impstation/CosmicCult/god_ambient.ogg
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/_Impstation/CosmicCult/god_spawn.ogg

